<meta charset="UTF-8">
<header>
  <button
    mat-icon-button  class="header-menu-toggle" (click)="toggleSidebar()">
    <mat-icon>menu</mat-icon>
  </button>

  <img [src]="!isDarkMode ? 'img/header/logo-light.png' : 'img/header/logo-dark.png'" alt="Drs Zone" class="logo">
  @if (!isScreenSmall) {
    <nav>
      <ul class="nav_links">
        <li routerLinkActive="activeLink" [routerLink]="'home'">
          <a routerLinkActive="activeLink" >Főoldal</a>
          <mat-icon routerLinkActive="activeLink">home</mat-icon>
        </li>
        <li routerLinkActive="activeLink" [routerLink]="'news'">
          <a routerLinkActive="activeLink">Hírek</a>
          <mat-icon routerLinkActive="activeLink">newspaper</mat-icon>
        </li>
        <li routerLinkActive="activeLink" [routerLink]="'reviews'">
          <a routerLinkActive="activeLink">Összefoglalók</a>
          <mat-icon routerLinkActive="activeLink">rate_review</mat-icon>
        </li>
        <li routerLinkActive="activeLink">
          <a routerLinkActive="activeLink">Eredmények</a>
          <mat-icon routerLinkActive="activeLink">rate_review</mat-icon>
        </li>
      </ul>
    </nav>
  }
  @if (!isScreenSmall) {
    <div class="auth-container">
      @if (showSpinner) {
        <div class="loader-wrapper">
          <mat-spinner diameter="30"></mat-spinner>
        </div>
      }

      @if (canShowUserMenu() && hasProfileData) {
        <button mat-icon-button [matMenuTriggerFor]="userMenu" class="account-button"
                [style.display]="isAvatarLoading ? 'none' : 'flex'">
          <img [src]="avatarUrl"
               alt="avatar"
               class="account-icon"
               (load)="onAvatarLoad()"
               (error)="onAvatarError()">
        </button>

        <mat-menu #userMenu="matMenu" class="header-menu">
          <button mat-menu-item class="header-menu-item" [routerLink]="['/profile', username]">
            <mat-icon>manage_accounts</mat-icon>
            <span>Profilom</span>
          </button>

          @if (isAuthor()) {
            <button mat-menu-item routerLink="/my-articles" class="header-menu-item">
              <mat-icon>article</mat-icon>
              <span>Cikkeim</span>
            </button>
          }

          <mat-divider />

          <button mat-menu-item (click)="logout()" class="header-menu-item">
            <mat-icon color="warn">logout</mat-icon>
            <span>Kijelentkezés</span>
          </button>
        </mat-menu>
      }
      @else if (!isAuthLoading && !isAvatarLoading) {
        <button matTooltip="Jelentkezz be!" class="login-button" routerLink="/auth" mat-flat-button>
          Bejelentkezés
        </button>
      }
    </div>
  }
  <mat-slide-toggle
    (change)="toggleTheme()"
    [checked]="isDarkMode"
    hideIcon>
  </mat-slide-toggle>
</header>
